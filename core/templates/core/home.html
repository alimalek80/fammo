{% extends 'base.html' %}
{% load i18n static %}

{% block title %}{% trans "Welcome to FAMO" %}{% endblock %}

{% block extra_head %}
{# Optional: font — safe to keep or remove #}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
/* =====================================================================
   0) PAGE SCOPE & GLOBAL HELPERS (only affect the home page)
   ===================================================================== */
.famo-home header,
.famo-home section { position: relative; }

/* spacing overrides (when theme CSS wins over Tailwind) */
.famo-home .force-px  { padding-left: 2rem !important; padding-right: 2rem !important; }
.famo-home .force-py-lg{ padding-top: 5rem !important; padding-bottom: 5rem !important; }
.famo-home .force-pt   { padding-top: 2rem !important; }
.famo-home .force-mb   { margin-bottom: 1.5rem !important; }
.famo-home .force-mt   { margin-top: 1rem !important; }

/* heading rhythm */
.famo-home h1,
.famo-home h2,
.famo-home h3 { margin-top: 0 !important; margin-bottom: .75rem !important; }

/* color helpers (use when theme overrides Tailwind bg/text) */
.famo-home .text-indigo { color:#4F46E5 !important; }
.famo-home .bg-indigo   { background-color:#4F46E5 !important; }
.famo-home .bg-green    { background-color:#10B981 !important; }
.famo-home .bg-soft     { background-color:#EEF2FF !important; }

/* optional, explicit background reset + solid bg helpers */
.famo-home .bg-reset       { background: unset !important; opacity: 1 !important; }
.famo-home .force-bg-indigo{ background-color: #4F46E5 !important; }
.famo-home .force-bg-green { background-color: #10B981 !important; }
.famo-home .force-bg-soft  { background-color: #EEF2FF !important; }

/* full-bleed container (escape base container width) */
.full-bleed{
  width:100vw; position:relative; left:50%; right:50%;
  margin-left:-50vw; margin-right:-50vw;
}

/* FAQ animation */
.faq-answer { max-height: 0; overflow: hidden; transition: max-height .4s ease; }
.faq-toggle svg { transition: transform .3s ease; }
.faq-toggle[aria-expanded="true"] svg { transform: rotate(180deg); }


/* =====================================================================
   1) HERO
   ===================================================================== */

/* readability */
.famo-home .hero-section h1{
  color:#fff !important; text-shadow:0 2px 4px rgba(0,0,0,.4);
}
.famo-home .hero-section p{
  color:#E5E7EB !important; text-shadow:0 1px 3px rgba(0,0,0,.4);
}
/* small badge under the paragraph */
.famo-home .hero-section span{
  background-color:rgba(16,185,129,.9) !important; color:#fff !important;
}
/* override green span background inside hero */
.famo-home .hero-section span.highlight-orange {
  background-color: #F97316 !important;   /* orange-500 */
  color: #fff !important;
  font-weight: 800 !important;
  padding: 0.15em 0.4em !important;
  border-radius: 0.35em !important;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}
.famo-home .hero-section span.highlight-orange:hover {
  background-color: #EA580C !important;   /* darker orange on hover */
  transition: background-color .25s ease;
}
/* bold orange badge under the hero text */
.famo-home .hero-badge {
  background-color: #F97316 !important;   /* orange-500 */
  color: #fff !important;
  border-radius: 0.75rem !important;      /* soft oval corners */
  padding: 0.75rem 1.5rem !important;
  font-weight: 800 !important;
  font-size: 1.25rem !important;          /* larger text */
  display: inline-block;
  box-shadow: 0 6px 20px rgba(249,115,22,0.25); /* warm glow */
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

/* orange highlight style for emphasized keywords */
.famo-home .highlight-orange {
  background-color: #F97316 !important;   /* orange-500 */
  color: #fff !important;                 /* white text */
  font-weight: 800 !important;            /* bold text */
  padding: 0.15em 0.4em !important;       /* inner spacing */
  border-radius: 0.35em !important;       /* soft corners */
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.famo-home .highlight-orange:hover {
  background-color: #EA580C !important;   /* slightly darker on hover */
  transition: background-color .25s ease;
}

/* buttons on dark background */
.famo-home .hero-section a.primary-btn{
  background:#4F46E5 !important; color:#fff !important; border:none !important;
  box-shadow:0 4px 14px rgba(79,70,229,.4);
}
.famo-home .hero-section a.primary-btn:hover{ background:#6366F1 !important; }

.famo-home .hero-section a.secondary-btn{
  background:transparent !important; border:2px solid #fff !important; color:#fff !important;
  transition:all .2s ease;
}
.famo-home .hero-section a.secondary-btn:hover{ background:rgba(255,255,255,.15) !important; }

/* optional glass panel behind hero copy */
.famo-home .hero-blur{
  background:rgba(0,0,0,.30); backdrop-filter:blur(6px);
  border-radius:1rem; padding:2rem;
}

/* dark overlay over the hero image */
.famo-home .hero-overlay{ position:absolute; inset:0; background:rgba(0,0,0,.45); }

/* HERO layout – force flex so mobile stacks correctly even if a global grid exists */
.famo-home .hero-grid{
  display:flex !important;
  flex-direction:column-reverse !important;  /* form first, text second on mobile */
  gap:2rem !important;
}
@media (min-width:768px){
  .famo-home .hero-grid{
    flex-direction:row !important;           /* side-by-side on desktop */
    gap:2.5rem !important;
  }
  .famo-home .hero-grid > *{ width:50% !important; }
}

/* =====================================================================
   1.1) HERO Equal-height Columns
   ===================================================================== */
.famo-home .hero-grid { align-items: stretch !important; }   /* make both columns same height */

.famo-home .hero-col { display: flex; }                      /* each column becomes flex container */
.famo-home .hero-col > .fill {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* nice inner spacing for equal-height cards */
.famo-home .hero-blur.fill  { gap: 1rem; }
.famo-home .form-card.fill  { gap: 1rem; }


/* =====================================================================
   2) HERO FORM (right column)
   ===================================================================== */
.famo-home .form-card{
  padding:2rem !important; background:#fff !important; border-radius:1rem !important;
  box-shadow:0 10px 24px rgba(15,23,42,.08);
}
/* fields */
.famo-home .form-card input,
.famo-home .form-card select{
  padding:.75rem 1rem !important; border:1px solid #d1d5db !important;
  border-radius:.75rem !important; width:100%; background:#fff; box-sizing:border-box;
}
/* labels spacing */
.famo-home .form-card label{ margin-top:.5rem !important; display:block; }
.famo-home .form-card input + label,
.famo-home .form-card select + label{ margin-top:1rem !important; }

/* buttons (general helpers you can reuse elsewhere) */
.famo-home .btn-reset{ all:unset; display:inline-block; cursor:pointer; }
.famo-home .btn-indigo{
  background:#4F46E5 !important; color:#fff !important;
  padding:.75rem 1.25rem !important; border-radius:9999px !important;
  font-weight:600 !important; line-height:1 !important;
  box-shadow:0 8px 20px rgba(79,70,229,.15);
}
.famo-home .btn-indigo.outline{
  background:transparent !important; color:#4F46E5 !important; border:2px solid #4F46E5 !important;
}
.famo-home .btn-green{
  background:#10B981 !important; color:#fff !important;
  padding:.9rem 1.25rem !important; border-radius:9999px !important;
  font-weight:700 !important; line-height:1 !important;
  box-shadow:0 8px 20px rgba(16,185,129,.18);
}
.famo-home .btn-indigo:hover{ filter:brightness(.95); }
.famo-home .btn-green:hover{  filter:brightness(.95); }


/* =====================================================================
   3) WHY FAMO? cards
   ===================================================================== */
.famo-home .why-card{
  position:relative; background:#fff; border-radius:16px; padding:24px;
  box-shadow:0 10px 20px rgba(0,0,0,.06); border:1px solid rgba(0,0,0,.06);
  text-align:center;
}
/* thin top strip */
.famo-home .why-card::before{
  content:""; position:absolute; left:0; right:0; top:0; height:6px;
  border-top-left-radius:16px; border-top-right-radius:16px;
}
/* strip colors */
.famo-home .why-card.accent-indigo::before{ background:#4F46E5; }
.famo-home .why-card.accent-green::before{  background:#10B981; }
.famo-home .why-card.accent-amber::before{  background:#F59E0B; }

/* icon bubble */
.famo-home .why-icon{
  width:56px; height:56px; margin:10px auto 12px; border-radius:9999px;
  display:grid; place-items:center; background:#ECFDF5; color:#10B981;
  box-shadow:0 4px 12px rgba(16,185,129,.18); font-size:26px; line-height:1;
}
/* variant icon colors */
.famo-home .accent-indigo .why-icon{ background:#EEF2FF; color:#4F46E5; box-shadow:0 4px 12px rgba(79,70,229,.18); }
.famo-home .accent-amber  .why-icon{ background:#FFF7ED; color:#F59E0B; box-shadow:0 4px 12px rgba(245,158,11,.18); }

.famo-home .why-title{ font-weight:800; font-size:1.25rem; color:#0F172A; margin-bottom:6px; }
.famo-home .why-text{  color:#475569; font-size:.95rem; line-height:1.5; }


/* =====================================================================
   4) TESTIMONIALS
   ===================================================================== */
.famo-home .t-wrap{
  background:linear-gradient(180deg,#ffffff 0%,#f5f7ff 100%);
  border-top:1px solid rgba(0,0,0,.04); border-bottom:1px solid rgba(0,0,0,.04);
}
.famo-home .t-card{
  position:relative; background:#fff; border-radius:16px; padding:22px 22px 20px;
  border:1px solid rgba(79,70,229,.16); box-shadow:0 10px 24px rgba(15,23,42,.06);
  transition:transform .25s ease, box-shadow .25s ease;
}
.famo-home .t-card:hover{ transform:translateY(-3px); box-shadow:0 16px 32px rgba(15,23,42,.10); }
/* top accent */
.famo-home .t-card::before{
  content:""; position:absolute; left:0; right:0; top:0; height:4px;
  border-top-left-radius:16px; border-top-right-radius:16px; background:#4F46E5;
}
.famo-home .t-card.green::before{ background:#10B981; }
.famo-home .t-card.amber::before{ background:#F59E0B; }
/* quote mark + text + author */
.famo-home .t-quote{
  position:absolute; top:10px; right:16px; font-size:40px; line-height:1;
  color:rgba(79,70,229,.18); pointer-events:none; font-family:Georgia,"Times New Roman",serif;
}
.famo-home .t-text{ color:#334155; font-size:.98rem; line-height:1.6; margin-bottom:16px; }
.famo-home .t-author{ display:flex; align-items:center; gap:10px; color:#0f172a; font-weight:700; }
.famo-home .t-avatar{
  width:36px; height:36px; border-radius:9999px; display:grid; place-items:center;
  background:#EEF2FF; color:#4F46E5; font-weight:800; border:1px solid rgba(79,70,229,.25);
}
.famo-home .t-stars{ color:#F59E0B; letter-spacing:2px; margin-bottom:10px; }


/* =====================================================================
   5) RESPONSIVE TWEAKS (optional extras)
   ===================================================================== */
@media (max-width:768px){
  /* reduce gaps slightly on mobile if needed */
  .famo-home .hero-grid{ gap:2rem !important; }
}

/* =====================================================================
   6) TOP-OF-HERO CHAT WIDGET (UI only)
   ===================================================================== */
.famo-home .chat-widget{
  /* default visual styles */
  width:min(92vw, 640px);
  background:rgba(17,24,39,.70); /* slate-900/70 */
  backdrop-filter:blur(8px);
  border:1px solid rgba(255,255,255,.15);
  border-radius:16px;
  box-shadow:0 10px 24px rgba(0,0,0,.35);
  color:#fff;
  z-index:30;
}
/* Inline variant (does not overlay content) */
.famo-home .chat-widget--inline{
  position:static; left:auto; top:auto; transform:none;
  margin:0 auto 1rem;
}
.famo-home .chat-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:.6rem .9rem;
}
.famo-home .chat-title{ display:flex; align-items:center; gap:.5rem; font-weight:800; letter-spacing:.2px; }
.famo-home .chat-badge{
  width:26px; height:26px; border-radius:9999px; display:grid; place-items:center;
  background:#4F46E5; box-shadow:0 6px 18px rgba(79,70,229,.35);
}
.famo-home .chat-toggle{ all:unset; cursor:pointer; display:inline-flex; align-items:center; gap:.35rem; color:#E5E7EB; font-weight:600; }
.famo-home .chat-toggle svg{ transition:transform .25s ease; }

.famo-home .chat-body{ max-height:0; overflow:hidden; transition:max-height .3s ease; }
.famo-home .chat-body.open{ max-height:360px; }
.famo-home .chat-messages{ padding:.5rem .75rem; display:flex; flex-direction:column; gap:.5rem; max-height:260px; overflow:auto; }
.famo-home .msg{ max-width:90%; padding:.5rem .75rem; border-radius:1rem; font-size:.95rem; line-height:1.35; }
.famo-home .msg.bot{ align-self:flex-start; background:rgba(99,102,241,.22); border:1px solid rgba(99,102,241,.35); }
.famo-home .msg.user{ align-self:flex-end; background:rgba(255,255,255,.92); color:#111827; border:1px solid rgba(0,0,0,.08); }
.famo-home .chat-input{ display:flex; gap:.5rem; padding:.5rem .75rem .75rem; }
.famo-home .chat-input input{ flex:1; background:#fff; color:#111827; border:1px solid #d1d5db; border-radius:12px; padding:.6rem .8rem; }
.famo-home .chat-input button{ background:#10B981; color:#fff; border:none; border-radius:9999px; padding:.6rem 1rem; font-weight:700; box-shadow:0 8px 20px rgba(16,185,129,.25); }

/* Animated scrolling placeholder for long text */
@keyframes scrollPlaceholder {
  0%, 20% { transform: translateX(0); }
  80%, 100% { transform: translateX(calc(-100% + 100%)); }
}

.famo-home .chat-input input::placeholder {
  display: inline-block;
  white-space: nowrap;
  animation: scrollPlaceholder 8s linear infinite;
  will-change: transform;
}

/* Pause animation on focus or when user starts typing */
.famo-home .chat-input input:focus::placeholder {
  animation-play-state: paused;
  transform: translateX(0);
}

@media (min-width:640px) {
  /* Stop animation on larger screens where text fits */
  .famo-home .chat-input input::placeholder {
    animation: none;
    transform: none;
  }
}

@media (min-width:1024px){
  .famo-home .chat-body.open{ max-height:420px; }
  .famo-home .chat-messages{ max-height:310px; }
}
</style>

{% endblock %}

{% block content %}
<div class="famo-home">

<!-- HERO (full-bleed background) -->
<section
  class="hero-section full-bleed relative overflow-hidden force-py-lg"
  {% if hero and hero.background_image %}
    style="background-image:url('{{ hero.background_image.url }}');background-size:cover;background-position:center;"
  {% else %}
    style="background-color:#1E1E1E;"
  {% endif %}
>
  <div class="absolute inset-0 bg-black/50"></div>

  <div class="relative z-10 max-w-7xl mx-auto force-px py-20 md:py-24">
    <!-- Top-of-hero Chat Widget (simple inline) -->
    <div class="chat-widget chat-widget--inline" role="region" aria-label="Quick chat">
      <form id="homeChatForm" class="chat-input" method="GET" action="{% url 'chat' %}" autocomplete="off">
        <span class="chat-badge" aria-hidden="true">💬</span>
        <label for="homeChatInput" class="sr-only">Ask a question</label>
        <input id="homeChatInput" type="text" name="q" placeholder="{{ chat_placeholder }}" aria-label="Ask a question" required>
        <button type="submit">Chat</button>
      </form>
    </div>
  <div class="hero-grid">

      <!-- TEXT (second on mobile, left on desktop) -->
      <div class=" hero-col mt-8 md:mt-0">
        <div class="hero-blur fill">
          <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-6">
            {% if hero %}{{ hero.heading }}{% else %}{% trans "Personalized Pet Nutrition" %}{% endif %}
          </h1>

        <p class="text-lg md:text-xl mb-6 max-w-xl">
            {% blocktrans trimmed %}
            Get <span class="highlight-orange">personalized meal plans</span> and 
            <span class="highlight-orange">preventive health reports</span> for your furry friends. 
            Our AI analyzes your pet's unique needs to keep them healthy and happy.
            {% endblocktrans %}
        </p>

          <span class="hero-badge inline-block px-6 py-3 rounded-xl font-extrabold text-white text-lg md:text-2xl">
            {% if hero and hero.subheading_secondary %}{{ hero.subheading_secondary }}{% else %}{% trans "Powered by the FAMMO Diet Engine" %}{% endif %}
          </span>

          <div class="flex gap-4 mt-auto">
            <a href="{% url 'account_signup' %}" class="primary-btn px-6 py-3 rounded-full font-semibold">
              {% trans "Try for Free" %}
            </a>
            <a href="{% url 'account_login' %}" class="secondary-btn px-6 py-3 rounded-full font-semibold">
              {% trans "Login / Sign Up" %}
            </a>
          </div>
        </div>
      </div>

      <!-- FORM (first on mobile, right on desktop) -->
        <div class="hero-col">
          <div class="form-card fill">
            <h2 class="text-2xl font-bold text-center text-[#4F46E5] mb-6">
              {% trans "Get Your Pet's Nutrition & AI Health Report" %}
              <span class="inline-block ml-2 px-2 py-0.5 text-xs rounded-full text-white bg-[#10B981]">
                {% trans "Free & Easy" %}
              </span>
            </h2>
            <form id="leadForm" method="POST" action="{% url 'core:collect_lead' %}">
              {% csrf_token %}
              <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Pet type" %}</label>
              <select name="pet_type" required class="mt-1 mb-4 block w-full p-3 border border-gray-300 rounded-xl focus:border-[#4F46E5] focus:ring focus:ring-[#4F46E5]/30">
                <option value="">{% trans "Choose..." %}</option>
                <option value="cat">{% trans "Cat" %}</option>
                <option value="dog">{% trans "Dog" %}</option>
              </select>
              <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Pet weight (kg)" %}</label>
              <input type="number" name="weight" min="0.5" step="0.1" required class="mt-1 mb-4 block w-full p-3 border border-gray-300 rounded-xl focus:border-[#4F46E5] focus:ring focus:ring-[#4F46E5]/30"/>
              <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Email" %}</label>
              <input type="email" name="email" required class="mt-1 mb-6 block w-full p-3 border border-gray-300 rounded-xl focus:border-[#4F46E5] focus:ring focus:ring-[#4F46E5]/30"/>
              <button type="submit" class="w-full btn-reset btn-green">
                {% trans "Send Info & Get Report" %}
              </button>
              <p id="leadSuccess" class="hidden text-sm text-center text-[#10B981] mt-4">
                {% trans "Thank you! Your free personalized report is on its way." %}
              </p>
            </form>
          </div>
        </div>
      

    </div>
  </div>
</section>




  <!-- WHY FAMO (inside base container) !-->
   
<section id="why" class="py-16 bg-[#EEF2FF] force-py-lg">
  <div class="max-w-7xl mx-auto px-4">
    <h2 class="text-4xl font-extrabold text-center mb-12 text-[#4F46E5]">{% trans "Why FAMO?" %}</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        
        <!-- Card 1 -->
        <div class="why-card accent-green">
            <div class="why-icon">
            <i class="fa-solid fa-bowl-food" aria-hidden="true"></i>
              {#  <span class="material-symbols-outlined">restaurant</span> #}
            </div>
            <h3 class="why-title">{% trans "Personalized Meal Plans" %}</h3>
            <p class="why-text">
            {% trans "Tailored recommendations based on your pet's unique needs." %}
            </p>
        </div>

        <!-- Card 2 -->
        <div class="why-card accent-amber">
            <div class="why-icon">
            <i class="fa-solid fa-heart-pulse" aria-hidden="true"></i>
            {# <span class="material-symbols-outlined">monitor_heart</span> #}
            </div>
            <h3 class="why-title">{% trans "Health Risk Alerts" %}</h3>
            <p class="why-text">
            {% trans "Proactive insights to keep your pet healthy and happy." %}
            </p>
        </div>

        <!-- Card 3 -->
        <div class="why-card accent-indigo">
            <div class="why-icon">
            <i class="fa-solid fa-id-card-clip" aria-hidden="true"></i>
            {# <span class="material-symbols-outlined">badge</span> #}
            </div>
            <h3 class="why-title">{% trans "Smart Pet Profiles" %}</h3>
            <p class="why-text">
            {% trans "Comprehensive profiles for precise AI analysis." %}
            </p>
        </div>

    </div>
  </div>
</section>


    <!-- TESTIMONIALS !-->
   
    <section id="testimonials" class="force-py-lg t-wrap">
    <div class="max-w-7xl mx-auto force-px">
        <h2 class="text-4xl font-extrabold text-center mb-10 text-[#1f2937]">{% trans "What Our Users Say" %}</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% if testimonials %}
            {% for t in testimonials %}
            <article class="t-card {% cycle 'green' 'amber' ' ' %}">
                <div class="t-quote">“</div>

                {# Optional stars: add a stars integer on your testimonial model if you want #}
                {% if t.stars %}
                <div class="t-stars">
                    {% for _ in "12345"|slice:":t.stars" %}★{% endfor %}
                    {% for _ in "12345"|slice:"t.stars:" %}☆{% endfor %}
                </div>
                {% endif %}

                <p class="t-text">“{{ t.text }}”</p>

                <div class="t-author">
                {% if t.avatar_url %}
                    <img src="{{ t.avatar_url }}" class="t-avatar" alt="{{ t.author }}">
                {% else %}
                    <div class="t-avatar">{{ t.author|first|upper }}</div>
                {% endif %}
                <span>{{ t.author }}</span>
                </div>
            </article>
            {% endfor %}
        {% else %}
            <article class="t-card green">
            <div class="t-quote">“</div>
            <div class="t-stars">★★★★★</div>
            <p class="t-text">
                {% trans "FAMO transformed my dog's diet! The personalized plan was easy to follow and incredibly effective." %}
            </p>
            <div class="t-author">
                <div class="t-avatar">S</div><span>Sarah M.</span>
            </div>
            </article>

            <article class="t-card amber">
            <div class="t-quote">“</div>
            <div class="t-stars">★★★★★</div>
            <p class="t-text">
                {% trans "The health risk alerts helped me act early — true preventive care!" %}
            </p>
            <div class="t-author">
                <div class="t-avatar">M</div><span>Mark K.</span>
            </div>
            </article>
        {% endif %}
        </div>
    </div>
    </section>



   <!-- FAQ !-->
   
<section id="faqs" class="py-16 bg-white force-py-lg">
  <div class="max-w-4xl mx-auto px-4">
    <h2 class="text-4xl font-extrabold text-center mb-12 text-[#4F46E5]">{% trans "Frequently Asked Questions" %}</h2>

    {% if faqs %}
      <div class="space-y-4">
        {% for f in faqs %}
          <div class="bg-gray-50 rounded-xl shadow-md border border-gray-200">
            <button class="faq-toggle w-full flex justify-between items-center p-5 text-xl font-semibold text-left text-[#4F46E5] hover:bg-gray-100 transition rounded-xl" aria-expanded="false">
              {{ f.question }}
              <svg class="w-6 h-6 rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
            </button>
            <div class="faq-answer">
              <p class="p-5 pt-0 text-gray-700">{{ f.answer|linebreaksbr }}</p>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-center text-gray-500">{% trans "No FAQs have been published yet." %}</p>
    {% endif %}
  </div>
</section>


   <!-- CTA !-->
   
<section class="force-py-lg bg-reset force-bg-indigo">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h2 class="text-4xl font-bold text-white mb-4">{% trans "Ready to Transform Your Pet's Life?" %}</h2>
    <p class="text-xl text-indigo-100 mb-8 max-w-2xl mx-auto">
      {% trans "Join thousands of satisfied pet owners who trust FAMO for their pets' nutrition and health." %}
    </p>
    <a href="{% url 'account_signup' %}" class="btn-reset btn-green">
      {% trans "Get Started Today" %} &rarr;
    </a>
  </div>
</section>
</div>

{% endblock %}

{% block extra_js %}
<script>
  // FAQ accordion
  document.querySelectorAll('.faq-toggle').forEach(button => {
    button.addEventListener('click', () => {
      const content = button.nextElementSibling;
      const isExpanded = button.getAttribute('aria-expanded') === 'true';

      // Close others
      document.querySelectorAll('.faq-toggle').forEach(b => {
        if (b !== button) {
          b.setAttribute('aria-expanded','false');
          b.nextElementSibling.style.maxHeight = 0;
          b.querySelector('svg').style.transform = 'rotate(0deg)';
        }
      });

      // Toggle this
      button.setAttribute('aria-expanded', (!isExpanded).toString());
      content.style.maxHeight = isExpanded ? 0 : (content.scrollHeight + 'px');
      button.querySelector('svg').style.transform = isExpanded ? 'rotate(0deg)' : 'rotate(180deg)';
    });
  });

  // Lead Form AJAX (unchanged)
  const leadForm = document.getElementById('leadForm');
  if (leadForm) {
    leadForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
      fetch(leadForm.action, {
        method: 'POST',
        body: new FormData(leadForm),
        headers: { 'X-Requested-With': 'XMLHttpRequest', 'X-CSRFToken': csrftoken }
      })
      .then(res => {
        if (!res.ok) return res.json().then(d => { throw new Error(d.error || 'Error'); });
        return res.json();
      })
      .then(() => {
        leadForm.reset();
        document.getElementById('leadSuccess').classList.remove('hidden');
      })
      .catch(err => alert('{% trans "Error" %}: ' + err.message));
    });
  }

  // Home Chat UI (no backend)
  (function(){
    const chatBody   = document.getElementById('homeChatBody');
    const chatToggle = document.querySelector('.chat-toggle');
    const form       = document.getElementById('homeChatForm');
    const input      = document.getElementById('homeChatInput');

    if (!chatBody || !chatToggle || !form || !input) return;

    // Toggle open/closed
    chatToggle.addEventListener('click', () => {
      const isOpen = chatBody.classList.contains('open');
      chatBody.classList.toggle('open');
      chatToggle.setAttribute('aria-expanded', (!isOpen).toString());
      // rotate chevron and label
      const svg = chatToggle.querySelector('svg');
      const label = chatToggle.querySelector('span:not(.sr-only)');
      if (svg) svg.style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
      if (label) label.textContent = isOpen ? 'Show' : 'Hide';
    });

    // No JS interception: allow normal POST submit to /chat/
  })();

  // Animated placeholder marquee for long text (mobile-friendly)
  (function(){
    const input = document.getElementById('homeChatInput');
    if (!input) return;

    const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReduced) return; // respect user preference

    const original = input.getAttribute('placeholder') || '';
    if (!original || original.length < 24) return; // only animate long messages

    const gap = '          '; // visual gap when looping
    const loopText = original + gap;
    let i = 0;
    let timer = null;

    const tick = () => {
      // Don't animate while typing or focused
      if (document.activeElement === input || (input.value && input.value.length > 0)) {
        return;
      }
      // rotate characters
      i = (i + 1) % loopText.length;
      const rotated = loopText.slice(i) + loopText.slice(0, i);
      input.setAttribute('placeholder', rotated);
    };

    const start = () => { if (!timer) timer = setInterval(tick, 120); };
    const stop  = () => { if (timer) { clearInterval(timer); timer = null; } input.setAttribute('placeholder', original); };

    input.addEventListener('focus', stop);
    input.addEventListener('input', stop);
    input.addEventListener('blur', () => { if (!input.value) start(); });

    // Start on load for mobile sizes only
    const startIfMobile = () => {
      const isMobile = window.matchMedia && window.matchMedia('(max-width: 639px)').matches;
      if (isMobile) start(); else stop();
    };
    startIfMobile();
    window.addEventListener('resize', startIfMobile);
  })();
</script>
{% endblock %}
